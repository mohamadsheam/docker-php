    # Nginx server configuration

    server {
        # Listen on port 80 for incoming connections
        listen 80;
        # Set the server name (can be a domain or IP)
        server_name localhost;
        # Set the root directory for the project. Laravel's public assets are in the 'public' folder.
        root /var/www/public;

        # Add index.php to the list of index files
        index index.php index.html index.htm;

        # General location block to handle all requests
        location / {
            # Try to serve the requested file directly, then as a directory,
            # and finally fall back to Laravel's front controller (index.php)
            try_files $uri $uri/ /index.php?$query_string;
        }

        # Location block specifically for .php files
        location ~ \.php$ {
            try_files $uri =404;
            # Pass the script execution to the PHP-FPM service, which is named 'app' in our docker-compose.yml
            fastcgi_pass app:9000;
            fastcgi_index index.php;
            # Include standard FastCGI parameters
            include fastcgi_params;
            # Pass the script filename to PHP-FPM
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
        }

        # Block access to .htaccess files, as Nginx doesn't use them
        location ~ /\.ht {
            deny all;
        }
    }
